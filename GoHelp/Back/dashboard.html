<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>GoHelp</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="vendors/feather/feather.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <link rel="stylesheet" href="vendors/datatables.net-bs4/dataTables.bootstrap4.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" type="text/css" href="js/select.dataTables.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="css/vertical-layout-light/style.css">
  <link rel="stylesheet" href="./vendors/feather/feather.css">
  <link rel="stylesheet" href="./vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="./vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="./css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="./images/favicon.png" />
  <!-- endinject -->
  <link rel="shortcut icon" href="images/favicon.png" />
  <link rel="stylesheet" href="./vendors/mdi/css/materialdesignicons.min.css">
</head>
<body>
  <div class="container-scroller">
    <!-- partial:partials/_navbar.html -->
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
        <a class="navbar-brand brand-logo mr-5" href="index.html"><img src="images/favicon.png" class="mr-2" alt="logo"/></a>
        <a class="navbar-brand brand-logo-mini" href="index.html"><img src="images/favicon.png" alt="logo"/></a>
        <span>GoHelp</span>
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
          <span class="icon-menu"></span>
        </button>
        <ul class="navbar-nav navbar-nav-right">
          <li class="nav-item nav-profile dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
              <img id="user-profile-image-navbar" alt="profile" />
            </a>
          </li>

        </ul>
        <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
          <span class="icon-menu"></span>
        </button>
      </div>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">

      <nav class="sidebar sidebar-offcanvas" id="sidebar" style="  box-shadow: 0px 5px 11px -5px #CDD1E1;">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">
              <i class="mdi mdi-home menu-icon"></i>
              <span class="menu-title">Home</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
              <i class="mdi mdi-human-greeting menu-icon"></i>
              <span class="menu-title">Iniciativas</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="criariniciativa.html">Criar Iniciativa</a></li>
                <li class="nav-item"> <a class="nav-link" href="Geririniciativas.html">Gerir Iniciativas</a></li>
                <li class="nav-item"> <a class="nav-link" href="historicoiniciativa.html">Histórico</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#form-elements" aria-expanded="false" aria-controls="form-elements">
              <i class="icon-columns menu-icon"></i>
              <span class="menu-title">Colaboradores</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="form-elements">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"><a class="nav-link" href="gerirprofisisonais.html">Profissionais</a></li>
                <li class="nav-item"><a class="nav-link" href="gerircontas.html">Contas</a></li>

              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#charts" aria-expanded="false" aria-controls="charts">
              <i class="mdi mdi-cart menu-icon"></i>
              <span class="menu-title">Materiais</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="charts">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="listamaterial.html">Lista Materiais</a></li>
                <li class="nav-item"> <a class="nav-link" href="criarmaterial.html">Criar Material</a></li>

              </ul>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="dashboard.html">
              <i class="icon-bar-graph menu-icon"></i>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="definicoesconta.html">
              <i class="mdi mdi-contact-mail menu-icon"></i>
              <span class="menu-title">Definições de Conta</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="logoutButton" href="../Front/index.html">
              <i class="mdi mdi-logout menu-icon"></i>
              <span class="menu-title">Log Out</span>
            </a>
          </li>
        </ul>
      </nav>

      
      <!-- partial -->
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
            <div class="col-md-12 grid-margin">
              <div class="row">
                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                  <h3 id="mensagem" class="font-weight-bold"></h3>
                </div>
                <div class="col-12 col-xl-4">
                  <div class="justify-content-end d-flex">
                    <div class="dropdown flex-md-grow-1 flex-xl-grow-0">
                      
            
                      
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 grid-margin transparent">
                <div class="row">
                  <div class="col-md-6 mb-4 stretch-card transparent">
                    <div class="card card-tale">
                      <div class="card-body">
                        <p class="mb-4">Iniciativas Concluídas</p>
                        <p id="completed-initiatives" class="fs-30 mb-2">0</p>
                        <p>Até hoje</p>
                      </div>
                    </div>
                  </div>
                  <script>
                    // Função para recuperar dados do localStorage
                    function getLocalStorageData(key) {
                      return JSON.parse(localStorage.getItem(key));
                    }
                  
                    // Função para contar iniciativas concluídas
                    function countCompletedInitiatives() {
                      // Recuperar dados das iniciativas do localStorage
                      var storedInitiatives = getLocalStorageData("initiatives");
                  
                      // Verificar se os dados foram corretamente recuperados
                      if (!storedInitiatives) {
                        console.error("Dados das iniciativas não encontrados no localStorage.");
                        return 0;
                      }
                  
                      // Filtrar as iniciativas com o status "Concluída"
                      var completedInitiatives = storedInitiatives.filter(initiative => initiative.status === "Concluída");
                  
                      // Retornar o número de iniciativas concluídas
                      return completedInitiatives.length;
                    }
                  
                    // Atualizar o número de iniciativas concluídas no HTML
                    function updateCompletedInitiativesCount() {
                      var count = countCompletedInitiatives();
                      document.getElementById('completed-initiatives').textContent = count;
                    }
                  
                    // Chamar a função para atualizar o número de iniciativas concluídas ao carregar a página
                    document.addEventListener('DOMContentLoaded', updateCompletedInitiativesCount);
                  </script>
                  
                  <div class="col-md-6 mb-4 stretch-card transparent">
                    <div class="card card-tale">
                      <div class="card-body">
                        <p class="mb-4">Iniciativas Recusadas</p>
                        <p id="rejected-initiatives" class="fs-30 mb-2">0</p>
                        <p>Até hoje</p>
                      </div>
                    </div>
                  </div>
                  <script>
                    // Função para recuperar dados do localStorage
                    function getLocalStorageData(key) {
                      return JSON.parse(localStorage.getItem(key));
                    }
                  
                    // Função para contar iniciativas recusadas
                    function countRejectedInitiatives() {
                      // Recuperar dados das iniciativas do localStorage
                      var storedInitiatives = getLocalStorageData("initiatives");
                  
                      // Verificar se os dados foram corretamente recuperados
                      if (!storedInitiatives) {
                        console.error("Dados das iniciativas não encontrados no localStorage.");
                        return 0;
                      }
                  
                      // Filtrar as iniciativas com o status "Recusada"
                      var rejectedInitiatives = storedInitiatives.filter(initiative => initiative.status === "Recusada");
                  
                      // Retornar o número de iniciativas recusadas
                      return rejectedInitiatives.length;
                    }
                  
                    // Atualizar o número de iniciativas recusadas no HTML
                    function updateRejectedInitiativesCount() {
                      var count = countRejectedInitiatives();
                      document.getElementById('rejected-initiatives').textContent = count;
                    }
                  
                    // Chamar a função para atualizar o número de iniciativas recusadas ao carregar a página
                    document.addEventListener('DOMContentLoaded', updateRejectedInitiativesCount);
                  </script>
                                    
                </div>
                <div class="row">
                  <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                    <div class="card card-tale">
                      <div class="card-body">
                        <p class="mb-4">Total de Voluntários</p>
                        <p id="total-volunteers" class="fs-30 mb-2">0</p>
                        <p>Associados a iniciativas</p>
                      </div>
                    </div>
                  </div>  
                  <script>
                    // Função para recuperar dados do localStorage
                    function getLocalStorageData(key) {
                      return JSON.parse(localStorage.getItem(key));
                    }
                  
                    // Função para contar o número total de voluntários associados a iniciativas
                    function countTotalVolunteers() {
                      // Recuperar dados das iniciativas do localStorage
                      var storedInitiatives = getLocalStorageData("initiatives");
                  
                      // Verificar se os dados foram corretamente recuperados
                      if (!storedInitiatives) {
                        console.error("Dados das iniciativas não encontrados no localStorage.");
                        return 0;
                      }
                  
                      // Contar o número de e-mails em associatedVolunteers de todas as iniciativas
                      var totalVolunteers = storedInitiatives.reduce((sum, initiative) => {
                        if (Array.isArray(initiative.associatedVolunteers)) {
                          return sum + initiative.associatedVolunteers.length;
                        }
                        return sum;
                      }, 0);
                  
                      // Retornar o número total de voluntários
                      return totalVolunteers;
                    }
                  
                    // Atualizar o número total de voluntários no HTML
                    function updateTotalVolunteersCount() {
                      var count = countTotalVolunteers();
                      document.getElementById('total-volunteers').textContent = count;
                    }
                  
                    // Chamar a função para atualizar o número total de voluntários ao carregar a página
                    document.addEventListener('DOMContentLoaded', updateTotalVolunteersCount);
                  </script>
                  
                                    
                                    <div class="col-md-6 stretch-card transparent">
                                      <div class="card card-tale">
                                        <div class="card-body">
                                          <p class="mb-4">Total de Materiais</p>
                                          <p id="total-materials" class="fs-30 mb-2">0</p>
                                          <p>Associados a iniciativas</p>
                                        </div>
                                      </div>
                                    </div>
                                    <script>
                                      // Função para recuperar dados do localStorage
                                      function getLocalStorageData(key) {
                                        return JSON.parse(localStorage.getItem(key));
                                      }
                                    
                                      // Função para contar o número total de materiais associados a iniciativas
                                      function countTotalMaterials() {
                                        // Recuperar dados das iniciativas do localStorage
                                        var storedInitiatives = getLocalStorageData("initiatives");
                                    
                                        // Verificar se os dados foram corretamente recuperados
                                        if (!storedInitiatives) {
                                          console.error("Dados das iniciativas não encontrados no localStorage.");
                                          return 0;
                                        }
                                    
                                        // Somar o número de materiais associados a iniciativas com os status especificados
                                        var totalMaterials = storedInitiatives.reduce((sum, initiative) => {
                                          if (["Por realizar", "A decorrer", "Concluída"].includes(initiative.status)) {
                                            initiative.materiais.forEach(material => {
                                              sum += parseInt(material.quantidade);
                                            });
                                          }
                                          return sum;
                                        }, 0);
                                    
                                        // Retornar o número total de materiais
                                        return totalMaterials;
                                      }
                                    
                                      // Atualizar o número total de materiais no HTML
                                      function updateTotalMaterialsCount() {
                                        var count = countTotalMaterials();
                                        document.getElementById('total-materials').textContent = count;
                                      }
                                    
                                      // Chamar a função para atualizar o número total de materiais ao carregar a página
                                      document.addEventListener('DOMContentLoaded', updateTotalMaterialsCount);
                                    </script>
                                                                        
                </div>
                <div class="row mt-4">
                  <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                    <div class="card card-tale">
                      <div class="card-body">
                        <p class="mb-4">Localização Mais Frequente</p>
                        <p id="most-frequent-location" class="fs-30 mb-2">N/A</p>
                        <p>Em iniciativas</p>
                      </div>
                    </div>
                  </div>
                  <script>
                    // Função para recuperar dados do localStorage
                    function getLocalStorageData(key) {
                      return JSON.parse(localStorage.getItem(key));
                    }
                  
                    // Função para contar a localização que aparece mais vezes
                    function findMostFrequentLocation() {
                      // Recuperar dados das iniciativas do localStorage
                      var storedInitiatives = getLocalStorageData("initiatives");
                  
                      // Verificar se os dados foram corretamente recuperados
                      if (!storedInitiatives) {
                        console.error("Dados das iniciativas não encontrados no localStorage.");
                        return "N/A";
                      }
                  
                      // Contar as ocorrências de cada localização
                      var locationCounts = storedInitiatives.reduce((counts, initiative) => {
                        if (initiative.location) {
                          counts[initiative.location] = (counts[initiative.location] || 0) + 1;
                        }
                        return counts;
                      }, {});
                  
                      // Determinar a localização mais frequente
                      var mostFrequentLocation = Object.keys(locationCounts).reduce((a, b) => locationCounts[a] > locationCounts[b] ? a : b, "N/A");
                  
                      // Retornar a localização mais frequente
                      return mostFrequentLocation;
                    }
                  
                    // Atualizar a localização mais frequente no HTML
                    function updateMostFrequentLocation() {
                      var location = findMostFrequentLocation();
                      document.getElementById('most-frequent-location').textContent = location;
                    }
                  
                    // Chamar a função para atualizar a localização mais frequente ao carregar a página
                    document.addEventListener('DOMContentLoaded', updateMostFrequentLocation);
                  </script>
                                    
                                    <div class="col-md-6 stretch-card transparent">
                                      <div class="card card-tale">
                                        <div class="card-body">
                                          <p class="mb-4">Tipo de Iniciativa Mais Frequente</p>
                                          <p id="most-frequent-type" class="fs-30 mb-2">N/A</p>
                                          <p>Em iniciativas</p>
                                        </div>
                                      </div>
                                    </div>
                                    <script>
                                      // Função para recuperar dados do localStorage
                                      function getLocalStorageData(key) {
                                        return JSON.parse(localStorage.getItem(key));
                                      }
                                    
                                      // Função para contar o tipo de iniciativa que aparece mais vezes
                                      function findMostFrequentType() {
                                        // Recuperar dados das iniciativas do localStorage
                                        var storedInitiatives = getLocalStorageData("initiatives");
                                    
                                        // Verificar se os dados foram corretamente recuperados
                                        if (!storedInitiatives) {
                                          console.error("Dados das iniciativas não encontrados no localStorage.");
                                          return "N/A";
                                        }
                                    
                                        // Contar as ocorrências de cada tipo de iniciativa
                                        var typeCounts = storedInitiatives.reduce((counts, initiative) => {
                                          if (initiative.type) {
                                            counts[initiative.type] = (counts[initiative.type] || 0) + 1;
                                          }
                                          return counts;
                                        }, {});
                                    
                                        // Determinar o tipo de iniciativa mais frequente
                                        var mostFrequentType = Object.keys(typeCounts).reduce((a, b) => typeCounts[a] > typeCounts[b] ? a : b, "N/A");
                                    
                                        // Retornar o tipo de iniciativa mais frequente
                                        return mostFrequentType;
                                      }
                                    
                                      // Atualizar o tipo de iniciativa mais frequente no HTML
                                      function updateMostFrequentType() {
                                        var type = findMostFrequentType();
                                        document.getElementById('most-frequent-type').textContent = type;
                                      }
                                    
                                      // Chamar a função para atualizar o tipo de iniciativa mais frequente ao carregar a página
                                      document.addEventListener('DOMContentLoaded', updateMostFrequentType);
                                    </script>
                                                                        
                  </div>
              </div>
            <div class="col-md-6 grid-margin transparent">
                <div class="card" style="box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);">
                    <div class="card-body">
                      <p class="card-title">Voluntários & Iniciativas</p>
                      <canvas id="order-chart"></canvas>
                    </div>
                  </div>
                  
          </div>
          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
                <div class="card" style="box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);">
                  <div class="card-body">
                   <div class="d-flex justify-content-between">
                    <p class="card-title">Iniciativas Aceites & Recusadas</p>
                  
                   </div>
                    <p class="font-weight-500">Número total de iniciativas com o estado Aceite e iniciativas com o estado Recusado, ao longo do ano</p>
                    <div id="sales-legend" class="chartjs-legend mt-4 mb-2"></div>
                    <canvas id="sales-chart"></canvas>
                  </div>
                </div>
              </div>
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card" style="box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);">
                <div class="card-body">
                    <h4 class="card-title">Iniciativas por Tipo</h4>
                    <canvas id="doughnutChart"></canvas>
                  <div id="sales-legend" class="chartjs-legend mt-4 mb-2"></div>
                  <canvas id="sales-chart"></canvas>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
                <div class="card" style="box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);">
                  <div class="card-body">
                    <div class="card-body">
                        <h4 class="card-title">Materiais Utilizados</h4>
                        
                          <canvas id="south-america-chart"></canvas>
                          <div id="south-america-legend"></div>
                          <br>
                    <p class="font-weight-500">Número total de materiais associados a iniciativas que irão ocorrer no futuro, ou que já decorreram</p>
                    <div id="sales-legend" class="chartjs-legend mt-4 mb-2"></div>
                    <canvas id="sales-chart"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6 grid-margin stretch-card">
              <div class="card" style="box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);">
                <div class="card-body">
                        <h4 class="card-title">Novos Voluntários por Mês</h4>
                        <canvas id="barChart"></canvas>
                
                  <div id="sales-legend" class="chartjs-legend mt-4 mb-2"></div>
                  <canvas id="sales-chart"></canvas>
                </div>
              </div>
            </div>
          </div>
          
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <script src="./vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="./vendors/chart.js/Chart.min.js"></script>
  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="./js/off-canvas.js"></script>
  <script src="./js/hoverable-collapse.js"></script>
  <script src="./js/template.js"></script>
  <script src="./js/settings.js"></script>
  <script src="./js/todolist.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="./js/chart.js"></script>
  <!-- plugins:js -->
  <script src="vendors/js/vendor.bundle.base.js"></script>
  <script src="./Backend/dashboard.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="vendors/chart.js/Chart.min.js"></script>
  <script src="vendors/datatables.net/jquery.dataTables.js"></script>
  <script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
  <script src="js/dataTables.select.min.js"></script>
  <script src="../Front/js/google.js" type="module"></script>


  <!-- Custom js for this page-->
  <script src="js/dashboard.js"></script>
    <!-- plugins:js -->
    <script src="vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="vendors/chart.js/Chart.min.js"></script>
    <script src="vendors/datatables.net/jquery.dataTables.js"></script>
    <script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
    <script src="js/dataTables.select.min.js"></script>
  
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="js/off-canvas.js"></script>
    <script src="js/hoverable-collapse.js"></script>
    <script src="js/template.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <script src="js/dashboard.js"></script>
    <script src="js/Chart.roundedBarCharts.js"></script>
    <!-- End custom js for this page-->
  
     <!-- Bootstrap 5 JS bundle -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- End custom js for this page-->
  
</body>

</html>

